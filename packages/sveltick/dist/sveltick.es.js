const e={fcp:2e3,lcp:2500,tti:3e3,cls:.1,fid:100,inp:200,ttfb:800,componentRenderTime:500};async function t(t={}){const{trackMetrics:o=!0,showAlerts:r=!0,enableGamification:i=!0,thresholds:s={}}=t,a={...e,...s};if(o&&(await w(),console.log("📊 Performance Metrics:",n)),r&&f(a),i){d(m())}}let n={firstContentfulPaint:null,timeToInteractive:null,largestContentfulPaint:null,cumulativeLayoutShift:0,firstInputDelay:null,interactionToNextPaint:null,timeToFirstByte:null,componentRenderTimes:[]};function o(){return new Promise((e=>{if("undefined"!=typeof window&&"PerformanceObserver"in window){const t=new PerformanceObserver((n=>{const o=n.getEntriesByName("first-contentful-paint")[0];if(o){const n=o.startTime.toFixed(2);e(n),t.disconnect()}}));t.observe({type:"paint",buffered:!0})}else e(null)}))}function r(){return new Promise((e=>{if("undefined"!=typeof window){if(window.addEventListener("load",(()=>{const t=performance.now().toFixed(2);e(t)})),"complete"===document.readyState){const t=performance.now().toFixed(2);e(t)}}else e(null)}))}function i(){return new Promise((e=>{if("undefined"!=typeof window&&"PerformanceObserver"in window){const t=new PerformanceObserver((n=>{const o=n.getEntries(),r=o[o.length-1].startTime.toFixed(2);e(r),t.disconnect()}));t.observe({type:"largest-contentful-paint",buffered:!0})}else e(null)}))}function s(){return new Promise((e=>{if("undefined"!=typeof window&&"PerformanceObserver"in window){let t=0;const n=new PerformanceObserver((o=>{o.getEntries().forEach((e=>{!e.hadRecentInput&&e.value&&(t+=e.value)}));const r=t.toFixed(4);e(r),n.disconnect()}));n.observe({type:"layout-shift",buffered:!0})}else e(null)}))}function a(){return new Promise((e=>{if("undefined"!=typeof window&&"PerformanceObserver"in window){const t=new PerformanceObserver((n=>{const o=n.getEntries()[0],r=(o.processingStart-o.startTime).toFixed(2);e(r),t.disconnect()}));t.observe({type:"first-input",buffered:!0}),setTimeout((()=>{null===n.firstInputDelay&&(console.warn("⚠️ No First Input Delay captured, using default."),e(null))}),5e3)}else e(null)}))}function c(){return new Promise((e=>{let t=!1;const n=o=>{const r=(performance.now()-o.timeStamp).toFixed(2);e(r),t=!0,window.removeEventListener("click",n)};window.addEventListener("click",n),setTimeout((()=>{t||(console.warn("⚠️ No interaction occurred or INP tracking is not supported."),e(null))}),5e3)}))}function l(){return new Promise((e=>{if("undefined"!=typeof window){e((performance.timing.responseStart-performance.timing.requestStart).toFixed(2))}else e(null)}))}function u(e,t){return n.componentRenderTimes.push({name:e,renderTime:t}),{name:e,renderTime:t.toFixed(2)}}function f(t={}){const{fcp:o,lcp:r,tti:i,cls:s,fid:a,inp:c,ttfb:l,componentRenderTime:u}=t||e;null!=n.firstContentfulPaint&&n.firstContentfulPaint>o&&console.warn(`⚠️ FCP of ${n.firstContentfulPaint} ms exceeded threshold of ${o} ms`),null!=n.largestContentfulPaint&&n.largestContentfulPaint>r&&console.warn(`⚠️ LCP of ${n.largestContentfulPaint} ms exceeded threshold of ${r} ms`),null!=n.timeToInteractive&&n.timeToInteractive>i&&console.warn(`⚠️ TTI of ${n.timeToInteractive} ms exceeded threshold of ${i} ms`),null!=n.cumulativeLayoutShift&&n.cumulativeLayoutShift>s&&console.warn(`⚠️ CLS of ${n.cumulativeLayoutShift} exceeded threshold of ${s}`),null!=n.firstInputDelay&&n.firstInputDelay>a&&console.warn(`⚠️ FID of ${n.firstInputDelay} ms exceeded threshold of ${a} ms`),null!=n.interactionToNextPaint&&n.interactionToNextPaint>c&&console.warn(`⚠️ INP of ${n.interactionToNextPaint} ms exceeded threshold of ${c} ms`),null!=n.timeToFirstByte&&n.timeToFirstByte>l&&console.warn(`⚠️ TTFB of ${n.timeToFirstByte} ms exceeded threshold of ${l} ms`),n.componentRenderTimes.forEach((({name:e,renderTime:t})=>{t>u&&console.warn(`⚠️ Component ${e} render time of ${t} ms exceeded threshold of ${u} ms`)}))}function m(){let t=100;return[(n.firstContentfulPaint-e.fcp)/100,(n.largestContentfulPaint-e.lcp)/100,(n.timeToInteractive-e.tti)/100,100*(n.cumulativeLayoutShift-e.cls),(n.firstInputDelay-e.fid)/100,(n.interactionToNextPaint-e.inp)/100,(n.timeToFirstByte-e.ttfb)/100].forEach((e=>{e>0&&(t-=e)})),n.componentRenderTimes.forEach((({renderTime:n})=>{const o=(n-e.componentRenderTime)/100;o>0&&(t-=o)})),Math.max(0,Math.round(t))}function d(e){const t=[{threshold:90,message:`🏆 Excellent! Your score is ${e}/100. Keep up the great work!`},{threshold:70,message:`👍 Good job! Your score is ${e}/100. Some improvements needed.`},{threshold:0,message:`⚠️ Needs Improvement! Your score is ${e}/100. Optimize for better performance.`}].find((t=>e>=t.threshold));console.log(t?.message)}async function p(){await w();d(m())}async function w(){const[e,t,u,f,m,d,p]=await Promise.all([o(),r(),i(),s(),a(),c(),l()]);return n={...n,firstContentfulPaint:e,timeToInteractive:t,largestContentfulPaint:u,cumulativeLayoutShift:f,firstInputDelay:m,interactionToNextPaint:d,timeToFirstByte:p},n}function g(){return"undefined"!=typeof window&&void 0!==window.localStorage}let h=g()&&JSON.parse(localStorage.getItem("trafficSources"))||{Direct:0,Google:0,Facebook:0,Others:0},S=g()&&parseInt(localStorage.getItem("pageViewCount"))||0,y=g()?new Set(JSON.parse(localStorage.getItem("uniqueVisitors"))||[]):new Set,I=g()&&JSON.parse(localStorage.getItem("routeViews"))||[];function T(){if(g()){const e=S+1;return localStorage.setItem("pageViewCount",e),e}return 0}function P(){return g()&&parseInt(localStorage.getItem("pageViewCount"))||0}function v(){if(g()){let e=localStorage.getItem("visitorId");return e||(e=`${Date.now()}-${Math.random().toString(36).substring(2,15)}`,localStorage.setItem("visitorId",e)),y.add(e),localStorage.setItem("uniqueVisitors",JSON.stringify([...y])),y.size}return 0}function b(){return g()&&JSON.parse(localStorage.getItem("uniqueVisitors")).length||0}function x(e){if(g()){const t={route:e,timestamp:Date.now()};return I.find((t=>t.route===e))||(I.push(t),localStorage.setItem("routeViews",JSON.stringify(I))),I}return[]}function F(){return g()&&JSON.parse(localStorage.getItem("routeViews"))||[]}function O(){if(g()){if(!sessionStorage.getItem("trackedTrafficSource")){const e=document.referrer.toLowerCase();e?e.includes("google")?h.Google++:e.includes("facebook")?h.Facebook++:h.Others++:h.Direct++,sessionStorage.setItem("trackedTrafficSource","true")}return localStorage.setItem("trafficSources",JSON.stringify(h)),h}return{Direct:0,Google:0,Facebook:0,Others:0}}function $(){return g()?JSON.parse(localStorage.getItem("trafficSources"))||h:{Direct:0,Google:0,Facebook:0,Others:0}}function N(){return{pageViews:T(),uniqueVisitors:v(),routeViews:x(window.location.pathname),trafficSources:O()}}export{m as calculatePerformanceScore,f as checkPerformanceAlerts,P as getPageViews,w as getPerformanceMetrics,F as getRouteViews,$ as getTrafficSources,b as getUniqueVisitors,p as runGamification,t as runPerformanceTracker,N as trackAllActivities,u as trackComponentRender,s as trackCumulativeLayoutShift,o as trackFirstContentfulPaint,a as trackFirstInputDelay,c as trackInteractionToNextPaint,i as trackLargestContentfulPaint,l as trackTimeToFirstByte,r as trackTimeToInteractive};
//# sourceMappingURL=sveltick.es.js.map
